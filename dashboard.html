<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard | ScanAttend</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="style.css">

    <style>
        body { background:#f4f6f9; font-family: Arial, sans-serif; }
        .dashboard-container { padding:20px; max-width:1100px; margin:auto; }
        table { width:100%; border-collapse:collapse; background:white; }
        th, td { padding:12px; border:1px solid #ddd; }
        th { background:#007bff; color:white; }
        tr:nth-child(even) { background:#f2f2f2; }
        .controls { display:flex; gap:10px; margin-bottom:15px; }
        button, a.btn {
            padding:10px 15px;
            border:none;
            border-radius:5px;
            background:#28a745;
            color:white;
            text-decoration:none;
            cursor:pointer;
        }
        .logout { background:#dc3545; }
        select { padding:10px; }
        h2, h3 { text-align:center; }
    </style>
</head>

<body>

<!-- LOADER -->
<div id="loader" style="text-align:center; margin-top:100px;">
    <h3>Verifying Credentials...</h3>
    <p>Please wait</p>
</div>

<!-- DASHBOARD CONTENT -->
<div id="dash-content" style="display:none;">
    <div class="dashboard-container">

        <h2>Admin Dashboard</h2>

        <div class="controls">
            <a href="newqr.html" class="btn">âž• Create QR</a>
            <button onclick="logout()" class="logout">Logout</button>
        </div>

        <!-- REGISTERED USERS -->
        <section>
            <h3>Registered Students</h3>
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Reg No</th>
                        <th>Email</th>
                    </tr>
                </thead>
                <tbody id="userBody"></tbody>
            </table>
        </section>

        <hr style="margin:40px 0;">

        <!-- ATTENDANCE -->
        <section>
            <h3>Session Attendance</h3>

            <div class="controls">
                <select id="sessionSelector" onchange="loadAttendanceBySession()">
                    <option value="">All Sessions</option>
                </select>
            </div>

            <table>
                <thead>
                    <tr>
                        <th>Reg No</th>
                        <th>Email</th>
                        <th>Time</th>
                    </tr>
                </thead>
                <tbody id="attendanceBody"></tbody>
            </table>
        </section>

    </div>
</div>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyB0n1GiqGllPKRAKgz9lEgt-6Ac6Jc4MWU",
        authDomain: "scanattend-c07f6.firebaseapp.com",
        projectId: "scanattend-c07f6",
        storageBucket: "scanattend-c07f6.firebasestorage.app",
        messagingSenderId: "352653349762",
        appId: "1:352653349762:web:848065fdb26803f594359b"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
</script>

<script src="dashboard.js"></script>

</body>
</html>